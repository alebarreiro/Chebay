<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
</head>
<body>

    <!--Div chat-->
    <div id="chat_div">
    </div>
    <link rel="stylesheet" type="text/css" href="/Content/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/Content/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="/Content/jquery.ui.chatbox.css">

    <script language="javascript" src="/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
    <script language="javascript" src="/Scripts/jquery-ui.js" type="text/javascript"></script>
    <script language="javascript" src="/Scripts/jquery.ui.chatbox.js" type="text/javascript"></script>

    <!--Reference the SignalR library. -->
    <script src="/Scripts/jquery.signalR-2.1.2.js" type="text/javascript"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>

    <!--<script src="/Scripts/Chat.js" type="text/javascript"></script>-->


    <script type="text/javascript">

        $(function () {
            var box = null;
            var groupChat = $.connection.chat;

            if (box) {
                box.chatbox("option", "boxManager").toggleBox();
            }
            else {
                box = $("#chat_div").chatbox({
                    id: "chat_div",
                    user: { key: "value" },
                    title: "chat",
                    messageSent: function (id, user, msg) {
                        //myWS.send(msg);
                        groupChat.server.sendGroup("hardcoded", "leo", msg);
                    }
                });
                //minimizo
                box.chatbox("toggleContent");
            };


            //Receive function
            groupChat.client.receiveGroup = function (message) {
                $("#chat_div").chatbox("option", "boxManager").addMsg(null, message);//addMsg(obj.id, obj.msg);
            };

            // Start the connection.
            $.connection.hub.start().done(function () {
                //register on group
                groupChat.server.joinGroup("hardcoded");
            });

        });



    </script>



</body>
</html>
