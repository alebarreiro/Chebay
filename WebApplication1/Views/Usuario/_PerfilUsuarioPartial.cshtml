@{
    
}

<h2>Datos personales</h2>
<div class="perfil-user">
    <div class="perfil-user-datos">
        <div class="form-inline">
            <div class="form-group custom-form-group">
                <label for="exampleInputName2">Nombre</label>
                <input type="text" class="form-control" id="user-nombre" placeholder="Ingrese su nombre" value="">
            </div>
            <div class="form-group custom-form-group">
                <label for="exampleInputEmail2">Apellido</label>
                <input type="email" class="form-control" id="user-apellido" placeholder="Ingrese su apellido" value="">
            </div>
        </div>
        <div class="form-inline">
            <div class="form-group custom-form-group">
                <label for="exampleInputName2">Pais</label>
                <input type="text" class="form-control" id="user-pais" placeholder="Ingrese su país" value="">
            </div>
            <div class="form-group custom-form-group">
                <label for="exampleInputEmail2">Ciudad</label>
                <input type="text" class="form-control" id="user-ciudad" placeholder="Ingrese su ciudad">
            </div>
        </div>
        <div class="form-inline">
            <div class="form-group custom-form-group">
                <label for="exampleInputName2">Direccion</label>
                <input type="text" class="form-control" id="user-direccion" placeholder="Ingrese su dirección">
            </div>
            <div class="form-group custom-form-group">
                <label for="exampleInputEmail2">Número contacto</label>
                <input type="text" class="form-control" id="user-nrocontacto" placeholder="Ingrese su número de contacto">
            </div>
        </div>
        <button type="button" id="btnActualizarDatos" class="btn btn-default" style="margin: 20px 5px 5px 5px;">Actualizar Datos</button>
    </div>
    <div class="perfil-user-img">
        <div>
            <img id="imgUser" class="img-responsive" src="@Url.Action("getUserImg", "Usuario", new { userId = @Context.User.Identity.Name })" alt="Person Image" />
        </div>
        <div class="form-group">
            <label for="exampleInputFile">Seleccionar archivo: </label>
            <input type="file" id="fileUploadUser">
            <p class="help-block">Imágen de perfil de usuario.</p>
        </div>

        <button type="button" id="btnUploadFileUser" class="btn btn-default">Cargar imágen</button>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {

        $('#btnUploadFileUser').on('click', function () {
            $("#btnUploadFileUser").html($("#btnUploadFileUser").html() + "<i class=\"fa fa-spinner fa-pulse\"></i>");
            var data = new FormData();
            var files = $("#fileUploadUser").get(0).files;
            // Add the uploaded image content to the form data collection
            if (files.length > 0) {
                data.append("UploadedImage", files[0]);
            }

            // Make Ajax request with the contentType = false, and procesDate = false
            var ajaxRequest = $.ajax({
                type: "POST",
                url: "@Url.Action("UploadFile", "Usuario")",
                contentType: false,
                processData: false,
                data: data
            });

            ajaxRequest.done(function (xhr, textStatus) {
                $("#btnUploadFileUser").html("Cargar imágen");
                var src = $("#imgUser").attr('src');
                $("#imgUser").attr('src', '');
                setTimeout(function () {
                    $("#imgUser").attr('src', src);
                }, 500);
            });
        });
    });
</script>

<style>
    .custom-form-group{
        width: 45%;
        margin: 5px;
    }
</style>